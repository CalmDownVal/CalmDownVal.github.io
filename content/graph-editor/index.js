(()=>{var Jt=Object.create;var he=Object.defineProperty;var Qt=Object.getOwnPropertyDescriptor;var er=Object.getOwnPropertyNames;var tr=Object.getPrototypeOf,rr=Object.prototype.hasOwnProperty;var or=(t,e,r)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var nr=t=>he(t,"__esModule",{value:!0});var ir=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var sr=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of er(e))!rr.call(t,n)&&(r||n!=="default")&&he(t,n,{get:()=>e[n],enumerable:!(o=Qt(e,n))||o.enumerable});return t},ar=(t,e)=>sr(nr(he(t!=null?Jt(tr(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var pe=(t,e,r)=>(or(t,typeof e!="symbol"?e+"":e,r),r);var Zt=ir((Oe,Fe)=>{(function(t,e){typeof Oe=="object"&&typeof Fe<"u"?Fe.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self).RBush=e()})(Oe,function(){"use strict";function t(s,u,h,y,m){(function _(g,P,T,A,R){for(;A>T;){if(A-T>600){var E=A-T+1,w=P-T+1,C=Math.log(E),N=.5*Math.exp(2*C/3),O=.5*Math.sqrt(C*N*(E-N)/E)*(w-E/2<0?-1:1),F=Math.max(T,Math.floor(P-w*N/E+O)),qt=Math.min(A,Math.floor(P+(E-w)*N/E+O));_(g,P,F,qt,R)}var le=g[P],te=T,L=A;for(e(g,T,P),R(g[A],le)>0&&e(g,T,A);te<L;){for(e(g,te,L),te++,L--;R(g[te],le)<0;)te++;for(;R(g[L],le)>0;)L--}R(g[T],le)===0?e(g,T,L):e(g,++L,A),L<=P&&(T=L+1),P<=L&&(A=L-1)}})(s,u,h||0,y||s.length-1,m||r)}function e(s,u,h){var y=s[u];s[u]=s[h],s[h]=y}function r(s,u){return s<u?-1:s>u?1:0}var o=function(s){s===void 0&&(s=9),this._maxEntries=Math.max(4,s),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(s,u,h){if(!h)return u.indexOf(s);for(var y=0;y<u.length;y++)if(h(s,u[y]))return y;return-1}function i(s,u){a(s,0,s.children.length,u,s)}function a(s,u,h,y,m){m||(m=x(null)),m.minX=1/0,m.minY=1/0,m.maxX=-1/0,m.maxY=-1/0;for(var _=u;_<h;_++){var g=s.children[_];d(m,s.leaf?y(g):g)}return m}function d(s,u){return s.minX=Math.min(s.minX,u.minX),s.minY=Math.min(s.minY,u.minY),s.maxX=Math.max(s.maxX,u.maxX),s.maxY=Math.max(s.maxY,u.maxY),s}function l(s,u){return s.minX-u.minX}function p(s,u){return s.minY-u.minY}function c(s){return(s.maxX-s.minX)*(s.maxY-s.minY)}function b(s){return s.maxX-s.minX+(s.maxY-s.minY)}function v(s,u){return s.minX<=u.minX&&s.minY<=u.minY&&u.maxX<=s.maxX&&u.maxY<=s.maxY}function f(s,u){return u.minX<=s.maxX&&u.minY<=s.maxY&&u.maxX>=s.minX&&u.maxY>=s.minY}function x(s){return{children:s,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(s,u,h,y,m){for(var _=[u,h];_.length;)if(!((h=_.pop())-(u=_.pop())<=y)){var g=u+Math.ceil((h-u)/y/2)*y;t(s,g,u,h,m),_.push(u,g,g,h)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(s){var u=this.data,h=[];if(!f(s,u))return h;for(var y=this.toBBox,m=[];u;){for(var _=0;_<u.children.length;_++){var g=u.children[_],P=u.leaf?y(g):g;f(s,P)&&(u.leaf?h.push(g):v(s,P)?this._all(g,h):m.push(g))}u=m.pop()}return h},o.prototype.collides=function(s){var u=this.data;if(!f(s,u))return!1;for(var h=[];u;){for(var y=0;y<u.children.length;y++){var m=u.children[y],_=u.leaf?this.toBBox(m):m;if(f(s,_)){if(u.leaf||v(s,_))return!0;h.push(m)}}u=h.pop()}return!1},o.prototype.load=function(s){if(!s||!s.length)return this;if(s.length<this._minEntries){for(var u=0;u<s.length;u++)this.insert(s[u]);return this}var h=this._build(s.slice(),0,s.length-1,0);if(this.data.children.length)if(this.data.height===h.height)this._splitRoot(this.data,h);else{if(this.data.height<h.height){var y=this.data;this.data=h,h=y}this._insert(h,this.data.height-h.height-1,!0)}else this.data=h;return this},o.prototype.insert=function(s){return s&&this._insert(s,this.data.height-1),this},o.prototype.clear=function(){return this.data=x([]),this},o.prototype.remove=function(s,u){if(!s)return this;for(var h,y,m,_=this.data,g=this.toBBox(s),P=[],T=[];_||P.length;){if(_||(_=P.pop(),y=P[P.length-1],h=T.pop(),m=!0),_.leaf){var A=n(s,_.children,u);if(A!==-1)return _.children.splice(A,1),P.push(_),this._condense(P),this}m||_.leaf||!v(_,g)?y?(h++,_=y.children[h],m=!1):_=null:(P.push(_),T.push(h),h=0,y=_,_=_.children[0])}return this},o.prototype.toBBox=function(s){return s},o.prototype.compareMinX=function(s,u){return s.minX-u.minX},o.prototype.compareMinY=function(s,u){return s.minY-u.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(s){return this.data=s,this},o.prototype._all=function(s,u){for(var h=[];s;)s.leaf?u.push.apply(u,s.children):h.push.apply(h,s.children),s=h.pop();return u},o.prototype._build=function(s,u,h,y){var m,_=h-u+1,g=this._maxEntries;if(_<=g)return i(m=x(s.slice(u,h+1)),this.toBBox),m;y||(y=Math.ceil(Math.log(_)/Math.log(g)),g=Math.ceil(_/Math.pow(g,y-1))),(m=x([])).leaf=!1,m.height=y;var P=Math.ceil(_/g),T=P*Math.ceil(Math.sqrt(g));D(s,u,h,T,this.compareMinX);for(var A=u;A<=h;A+=T){var R=Math.min(A+T-1,h);D(s,A,R,P,this.compareMinY);for(var E=A;E<=R;E+=P){var w=Math.min(E+P-1,R);m.children.push(this._build(s,E,w,y-1))}}return i(m,this.toBBox),m},o.prototype._chooseSubtree=function(s,u,h,y){for(;y.push(u),!u.leaf&&y.length-1!==h;){for(var m=1/0,_=1/0,g=void 0,P=0;P<u.children.length;P++){var T=u.children[P],A=c(T),R=(E=s,w=T,(Math.max(w.maxX,E.maxX)-Math.min(w.minX,E.minX))*(Math.max(w.maxY,E.maxY)-Math.min(w.minY,E.minY))-A);R<_?(_=R,m=A<m?A:m,g=T):R===_&&A<m&&(m=A,g=T)}u=g||u.children[0]}var E,w;return u},o.prototype._insert=function(s,u,h){var y=h?s:this.toBBox(s),m=[],_=this._chooseSubtree(y,this.data,u,m);for(_.children.push(s),d(_,y);u>=0&&m[u].children.length>this._maxEntries;)this._split(m,u),u--;this._adjustParentBBoxes(y,m,u)},o.prototype._split=function(s,u){var h=s[u],y=h.children.length,m=this._minEntries;this._chooseSplitAxis(h,m,y);var _=this._chooseSplitIndex(h,m,y),g=x(h.children.splice(_,h.children.length-_));g.height=h.height,g.leaf=h.leaf,i(h,this.toBBox),i(g,this.toBBox),u?s[u-1].children.push(g):this._splitRoot(h,g)},o.prototype._splitRoot=function(s,u){this.data=x([s,u]),this.data.height=s.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(s,u,h){for(var y,m,_,g,P,T,A,R=1/0,E=1/0,w=u;w<=h-u;w++){var C=a(s,0,w,this.toBBox),N=a(s,w,h,this.toBBox),O=(m=C,_=N,g=void 0,P=void 0,T=void 0,A=void 0,g=Math.max(m.minX,_.minX),P=Math.max(m.minY,_.minY),T=Math.min(m.maxX,_.maxX),A=Math.min(m.maxY,_.maxY),Math.max(0,T-g)*Math.max(0,A-P)),F=c(C)+c(N);O<R?(R=O,y=w,E=F<E?F:E):O===R&&F<E&&(E=F,y=w)}return y||h-u},o.prototype._chooseSplitAxis=function(s,u,h){var y=s.leaf?this.compareMinX:l,m=s.leaf?this.compareMinY:p;this._allDistMargin(s,u,h,y)<this._allDistMargin(s,u,h,m)&&s.children.sort(y)},o.prototype._allDistMargin=function(s,u,h,y){s.children.sort(y);for(var m=this.toBBox,_=a(s,0,u,m),g=a(s,h-u,h,m),P=b(_)+b(g),T=u;T<h-u;T++){var A=s.children[T];d(_,s.leaf?m(A):A),P+=b(_)}for(var R=h-u-1;R>=u;R--){var E=s.children[R];d(g,s.leaf?m(E):E),P+=b(g)}return P},o.prototype._adjustParentBBoxes=function(s,u,h){for(var y=h;y>=0;y--)d(u[y],s)},o.prototype._condense=function(s){for(var u=s.length-1,h=void 0;u>=0;u--)s[u].children.length===0?u>0?(h=s[u-1].children).splice(h.indexOf(s[u]),1):this.clear():i(s[u],this.toBBox)},o})});var ve,S,$e,ur,re,je,Xe,qe,me={},Je=[],cr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function V(t,e){for(var r in e)t[r]=e[r];return t}function Qe(t){var e=t.parentNode;e&&e.removeChild(t)}function I(t,e,r){var o,n,i,a={};for(i in e)i=="key"?o=e[i]:i=="ref"?n=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?ve.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)a[i]===void 0&&(a[i]=t.defaultProps[i]);return fe(t,a,o,n,null)}function fe(t,e,r,o,n){var i={type:t,props:e,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n??++$e};return n==null&&S.vnode!=null&&S.vnode(i),i}function xe(t){return t.children}function H(t,e){this.props=t,this.context=e}function J(t,e){if(e==null)return t.__?J(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?J(t):null}function et(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return et(t)}}function Se(t){(!t.__d&&(t.__d=!0)&&re.push(t)&&!_e.__r++||Xe!==S.debounceRendering)&&((Xe=S.debounceRendering)||je)(_e)}function _e(){for(var t;_e.__r=re.length;)t=re.sort(function(e,r){return e.__v.__b-r.__v.__b}),re=[],t.some(function(e){var r,o,n,i,a,d;e.__d&&(a=(i=(r=e).__v).__e,(d=r.__P)&&(o=[],(n=V({},i)).__v=i.__v+1,Te(d,i,n,r.__n,d.ownerSVGElement!==void 0,i.__h!=null?[a]:null,o,a??J(i),i.__h),nt(o,i),i.__e!=a&&et(i)))})}function tt(t,e,r,o,n,i,a,d,l,p){var c,b,v,f,x,D,s,u=o&&o.__k||Je,h=u.length;for(r.__k=[],c=0;c<e.length;c++)if((f=r.__k[c]=(f=e[c])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?fe(null,f,null,null,f):Array.isArray(f)?fe(xe,{children:f},null,null,null):f.__b>0?fe(f.type,f.props,f.key,null,f.__v):f)!=null){if(f.__=r,f.__b=r.__b+1,(v=u[c])===null||v&&f.key==v.key&&f.type===v.type)u[c]=void 0;else for(b=0;b<h;b++){if((v=u[b])&&f.key==v.key&&f.type===v.type){u[b]=void 0;break}v=null}Te(t,f,v=v||me,n,i,a,d,l,p),x=f.__e,(b=f.ref)&&v.ref!=b&&(s||(s=[]),v.ref&&s.push(v.ref,null,f),s.push(b,f.__c||x,f)),x!=null?(D==null&&(D=x),typeof f.type=="function"&&f.__k===v.__k?f.__d=l=rt(f,l,t):l=ot(t,f,v,u,x,l),typeof r.type=="function"&&(r.__d=l)):l&&v.__e==l&&l.parentNode!=t&&(l=J(v))}for(r.__e=D,c=h;c--;)u[c]!=null&&(typeof r.type=="function"&&u[c].__e!=null&&u[c].__e==r.__d&&(r.__d=J(o,c+1)),st(u[c],u[c]));if(s)for(c=0;c<s.length;c++)it(s[c],s[++c],s[++c])}function rt(t,e,r){for(var o,n=t.__k,i=0;n&&i<n.length;i++)(o=n[i])&&(o.__=t,e=typeof o.type=="function"?rt(o,e,r):ot(r,o,o,n,o.__e,e));return e}function ot(t,e,r,o,n,i){var a,d,l;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(r==null||n!=i||n.parentNode==null)e:if(i==null||i.parentNode!==t)t.appendChild(n),a=null;else{for(d=i,l=0;(d=d.nextSibling)&&l<o.length;l+=2)if(d==n)break e;t.insertBefore(n,i),a=i}return a!==void 0?a:n.nextSibling}function dr(t,e,r,o,n){var i;for(i in r)i==="children"||i==="key"||i in e||ye(t,i,null,r[i],o);for(i in e)n&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===e[i]||ye(t,i,e[i],r[i],o)}function We(t,e,r){e[0]==="-"?t.setProperty(e,r):t[e]=r==null?"":typeof r!="number"||cr.test(e)?r:r+"px"}function ye(t,e,r,o,n){var i;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)r&&e in r||We(t.style,e,"");if(r)for(e in r)o&&r[e]===o[e]||We(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?o||t.addEventListener(e,i?Ke:Ze,i):t.removeEventListener(e,i?Ke:Ze,i);else if(e!=="dangerouslySetInnerHTML"){if(n)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r!=null&&(r!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,r):t.removeAttribute(e))}}function Ze(t){this.l[t.type+!1](S.event?S.event(t):t)}function Ke(t){this.l[t.type+!0](S.event?S.event(t):t)}function Te(t,e,r,o,n,i,a,d,l){var p,c,b,v,f,x,D,s,u,h,y,m=e.type;if(e.constructor!==void 0)return null;r.__h!=null&&(l=r.__h,d=e.__e=r.__e,e.__h=null,i=[d]),(p=S.__b)&&p(e);try{e:if(typeof m=="function"){if(s=e.props,u=(p=m.contextType)&&o[p.__c],h=p?u?u.props.value:p.__:o,r.__c?D=(c=e.__c=r.__c).__=c.__E:("prototype"in m&&m.prototype.render?e.__c=c=new m(s,h):(e.__c=c=new H(s,h),c.constructor=m,c.render=hr),u&&u.sub(c),c.props=s,c.state||(c.state={}),c.context=h,c.__n=o,b=c.__d=!0,c.__h=[]),c.__s==null&&(c.__s=c.state),m.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=V({},c.__s)),V(c.__s,m.getDerivedStateFromProps(s,c.__s))),v=c.props,f=c.state,b)m.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(m.getDerivedStateFromProps==null&&s!==v&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(s,h),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(s,c.__s,h)===!1||e.__v===r.__v){c.props=s,c.state=c.__s,e.__v!==r.__v&&(c.__d=!1),c.__v=e,e.__e=r.__e,e.__k=r.__k,e.__k.forEach(function(_){_&&(_.__=e)}),c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(s,c.__s,h),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(v,f,x)})}c.context=h,c.props=s,c.state=c.__s,(p=S.__r)&&p(e),c.__d=!1,c.__v=e,c.__P=t,p=c.render(c.props,c.state,c.context),c.state=c.__s,c.getChildContext!=null&&(o=V(V({},o),c.getChildContext())),b||c.getSnapshotBeforeUpdate==null||(x=c.getSnapshotBeforeUpdate(v,f)),y=p!=null&&p.type===xe&&p.key==null?p.props.children:p,tt(t,Array.isArray(y)?y:[y],e,r,o,n,i,a,d,l),c.base=e.__e,e.__h=null,c.__h.length&&a.push(c),D&&(c.__E=c.__=null),c.__e=!1}else i==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=lr(r.__e,e,r,o,n,i,a,l);(p=S.diffed)&&p(e)}catch(_){e.__v=null,(l||i!=null)&&(e.__e=d,e.__h=!!l,i[i.indexOf(d)]=null),S.__e(_,e,r)}}function nt(t,e){S.__c&&S.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(o){o.call(r)})}catch(o){S.__e(o,r.__v)}})}function lr(t,e,r,o,n,i,a,d){var l,p,c,b=r.props,v=e.props,f=e.type,x=0;if(f==="svg"&&(n=!0),i!=null){for(;x<i.length;x++)if((l=i[x])&&"setAttribute"in l==!!f&&(f?l.localName===f:l.nodeType===3)){t=l,i[x]=null;break}}if(t==null){if(f===null)return document.createTextNode(v);t=n?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,v.is&&v),i=null,d=!1}if(f===null)b===v||d&&t.data===v||(t.data=v);else{if(i=i&&ve.call(t.childNodes),p=(b=r.props||me).dangerouslySetInnerHTML,c=v.dangerouslySetInnerHTML,!d){if(i!=null)for(b={},x=0;x<t.attributes.length;x++)b[t.attributes[x].name]=t.attributes[x].value;(c||p)&&(c&&(p&&c.__html==p.__html||c.__html===t.innerHTML)||(t.innerHTML=c&&c.__html||""))}if(dr(t,v,b,n,d),c)e.__k=[];else if(x=e.props.children,tt(t,Array.isArray(x)?x:[x],e,r,o,n&&f!=="foreignObject",i,a,i?i[0]:r.__k&&J(r,0),d),i!=null)for(x=i.length;x--;)i[x]!=null&&Qe(i[x]);d||("value"in v&&(x=v.value)!==void 0&&(x!==t.value||f==="progress"&&!x||f==="option"&&x!==b.value)&&ye(t,"value",x,b.value,!1),"checked"in v&&(x=v.checked)!==void 0&&x!==t.checked&&ye(t,"checked",x,b.checked,!1))}return t}function it(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(o){S.__e(o,r)}}function st(t,e,r){var o,n;if(S.unmount&&S.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||it(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){S.__e(i,e)}o.base=o.__P=null}if(o=t.__k)for(n=0;n<o.length;n++)o[n]&&st(o[n],e,typeof t.type!="function");r||t.__e==null||Qe(t.__e),t.__e=t.__d=void 0}function hr(t,e,r){return this.constructor(t,r)}function at(t,e,r){var o,n,i;S.__&&S.__(t,e),n=(o=typeof r=="function")?null:r&&r.__k||e.__k,i=[],Te(e,t=(!o&&r||e).__k=I(xe,null,[t]),n||me,me,e.ownerSVGElement!==void 0,!o&&r?[r]:n?null:e.firstChild?ve.call(e.childNodes):null,i,!o&&r?r:n?n.__e:e.firstChild,o),nt(i,t)}function ut(t,e){var r={__c:e="__cC"+qe++,__:t,Consumer:function(o,n){return o.children(n)},Provider:function(o){var n,i;return this.getChildContext||(n=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&n.some(Se)},this.sub=function(a){n.push(a);var d=a.componentWillUnmount;a.componentWillUnmount=function(){n.splice(n.indexOf(a),1),d&&d.call(a)}}),o.children}};return r.Provider.__=r.Consumer.contextType=r}ve=Je.slice,S={__e:function(t,e){for(var r,o,n;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),n=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t),n=r.__d),n)return r.__E=r}catch(i){t=i}throw t}},$e=0,ur=function(t){return t!=null&&t.constructor===void 0},H.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=V({},this.state),typeof t=="function"&&(t=t(V({},r),this.props)),t&&V(r,t),t!=null&&this.__v&&(e&&this.__h.push(e),Se(this))},H.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Se(this))},H.prototype.render=xe,re=[],je=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,_e.__r=0,qe=0;var M=class extends Error{code;isTranslationError=!0;constructor(e,r){super(`${e} ${r}`),this.code=e}static is(e){return e?.isTranslationError===!0}};pe(M,"FORMAT_UNAVAILABLE","FormatUnavailable"),pe(M,"INVALID_PARAMETER","InvalidParameter"),pe(M,"KEY_NOT_FOUND","KeyNotFound");function Ee(t){return t[1]??"variable"}function ct(t,e){let r=t[0];return e!==void 0&&Object.prototype.hasOwnProperty.call(e,r)?""+e[r]:r}function dt(t,e){let{length:r}=e,o=Ee(t);if(t.length-2>r)throw new M(M.INVALID_PARAMETER,`too many parameters for format '${o}'`);for(let n=0;n<r;++n)e[n].call(null,t[2+n],o,n)}function pr(t,e,r){fr(t)&&Array.isArray(mr(t))||_r("a map of messages",e,r)}function fr(t){return t!==null&&typeof t=="object"}function mr(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function _r(t,e,r){throw new M(M.INVALID_PARAMETER,`expected parameter ${r+1} of format '${e}' to be ${t}`)}var yr=[pr],vr=[],xr=Object.freeze({__proto__:null,select:()=>(t,e)=>{dt(t,yr);let r=t[2];if(!r.other)throw new M(M.INVALID_PARAMETER,`messages of format '${Ee(t)}' must contain the key 'other'`);let o={};for(let n in r)o[n]=e.interpret(r[n]);return n=>(o[ct(t,n)]??o.other)(n)},variable:()=>t=>(dt(t,vr),e=>ct(t,e))}),B=class extends Error{input;at;isParseError=!0;constructor(e,r,o){super(e),this.input=r,this.at=o}toString(){let e=Math.max(this.input.lastIndexOf(`
`,this.at-1),0)+1,r=this.input.indexOf(`
`,this.at+1);r===-1?r=this.input.length:this.input[r-1]==="\r"&&--r;let o=`${this.input.slice(e,r)}
${" ".repeat(this.at-e)}^`;return`${this.message} at pos ${this.at}:

${o}

${this.stack}`}static is(e){return e?.isParseError===!0}};function ft(t){return t===32||t>=9&&t<=13||t===133||t===160||t===6158||t>=8192&&t<=8205||t===8232||t===8233||t===8239||t===8287||t===8288||t===12288||t===65279}function Y(t,e){let{length:r}=t,o=e;for(;o<r&&ft(t.charCodeAt(o));)++o;return o}function oe(t,e){let{length:r}=t,o,n=e;for(;n<r&&(o=t[n],o!=="{"&&o!=="}"&&o!==","&&o!=="#"&&o!=="'"&&o!==":"&&!ft(o.charCodeAt(0)));)++n;if(e===n)throw new B(`expected an identifier but ${o?`saw '${o}'`:"saw the end of pattern"} instead`,t,e);return t.slice(e,n)}function lt(t,e,r){let{length:o}=t,n,i=e,a=e,d="";for(;a<o&&(n=t[a],!(n==="{"||n==="}"||r&&n==="#"));){if(n==="'"){if(n=t[++a],n==="'")d+=t.slice(i,a),i=a+1;else if(n==="{"||n==="}"||r&&n==="#"){for(d+=t.slice(i,a-1),i=a;++a<o;)if(n=t[a],n==="'"){if(n=t[a+1],n!=="'")break;d+=t.slice(i,++a),i=a+1}d+=t.slice(i,a),i=++a}}++a}return d+=t.slice(i,a),d}function mt(t,e,r,o){let{length:n}=t,i={};r.push(i);let a,d=o,l=[],p=Ae(t,e,l,!0);for(i[d]=l;p<n&&(p=Y(t,p),a=t[p],a!==","&&a!=="}");){if(d=oe(t,p),p=Y(t,p+d.length),a=t[p],a!=="{")throw new B("expected '{'",t,p);l=[],p=Ae(t,p+1,l,!0),i[d]=l}return p}function gr(t,e,r,o){let{length:n}=t,i={};r.push(i);let a,d=o,l=Y(t,e),p=oe(t,l);for(l+=p.length,i[d]=p;l<n&&(l=Y(t,l),a=t[l],a!==","&&a!=="}");){if(d=oe(t,l),l=Y(t,l+d.length),a=t[l],a==="{")return mt(t,l+1,r,d);if(a!==":")throw new B("expected ':' or '{'",t,l);l=Y(t,l+1),p=oe(t,l),l+=p.length,i[d]=p}return l}function br(t,e,r){let o=e,n=t[o];if(n==="#")return r.push("#"),o+1;if(n!=="{")throw new B("expected '#' or '{'",t,o);let{length:i}=t;do{o=Y(t,o+1);let a=oe(t,o);switch(o=Y(t,o+a.length),n=t[o],n){case",":case"}":r.push(a);break;case"{":if(r.length<2)throw new B("expected an identifier but saw a message instead",t,o);o=mt(t,o+1,r,a),n=t[o];break;case":":if(r.length<2)throw new B("expected an identifier but saw an attribute instead",t,o);o=gr(t,o+1,r,a),n=t[o];break;default:throw new B(`unexpected character '${n}'`,t,o)}}while(o<i&&n!=="}");return o+1}function Ae(t,e,r,o){let n,i=e,a=lt(t,i,o);a&&(r.push(a),i+=a.length);let{length:d}=t;for(;i<d;){if(n=t[i],n==="}"){if(!o)throw new B("unexpected '}'",t,i);++i;break}let l=[];i=br(t,i,l),r.push(l),a=lt(t,i,o),a&&(r.push(a),i+=a.length)}return i}function ht(t){let e=[];return Ae(t,0,e,!1),e}function _t(t,e,r){for(let o in t){if(o.startsWith("$"))continue;let n=t[o];switch(typeof n){case"string":e[r+o]=n;break;case"object":n!==null&&_t(n,e,`${r}${o}.`)}}return e}function Pr(t){return _t(t,{},"")}function pt(t,e){let r={};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e(t[o],o));return r}var yt=class{formatProvider;constructor(e){this.formatProvider=e}interpret(e,r){let{length:o}=e;if(o===1)return this.interpretElement(e[0],r);let n=new Array(o);for(let i=0;i<o;++i)n[i]=this.interpretElement(e[i],r);return Sr.bind(null,n)}interpretElement(e,r){if(typeof e=="string")return()=>e;let o=e;if(o.length===1&&o[0]==="#"){if(r===void 0)return()=>"#";o=[r]}return this.formatProvider.getFormat(o)(o,this)}};function Sr(t,e){let r="";for(let o=0;o<t.length;++o)r+=t[o](e);return r}var vt=class{formatMap;constructor(e){this.formatMap=e}getFormat(e){let r=Ee(e),o=this.formatMap[r];if(!o)throw new M(M.FORMAT_UNAVAILABLE,r);return o}},Q;(function(t){t[t.Eager=0]="Eager",t[t.Lazy=1]="Lazy",t[t.Off=2]="Off"})(Q||(Q={}));var ne=class{cacheMode;expansions;interpreter;constructor({cacheMode:e,interpreter:r,translations:o}){this.cacheMode=e??Q.Lazy,this.interpreter=r,this.expansions=Pr(o),e===Q.Eager&&(this.expansions=pt(this.expansions,n=>r.interpret(ht(n))))}expand(e,r){let o=this.expansions[e];if(o===void 0)throw new M(M.KEY_NOT_FOUND,e);return typeof o=="string"&&(o=this.interpreter.interpret(ht(o)),this.cacheMode!==Q.Off&&(this.expansions[e]=o)),o(r)}static fromLocale(e,r=xr){let o=pt(r,(i,a)=>i(e.$format?.[a])),n=new vt(o);return new ne({cacheMode:Q.Lazy,interpreter:new yt(n),translations:e})}};var Tr,Z,xt;var Et=[],gt=S.__b,bt=S.__r,Pt=S.diffed,St=S.__c,Tt=S.unmount;function Ar(){for(var t;t=Et.shift();)if(t.__P)try{t.__H.__h.forEach(ge),t.__H.__h.forEach(Re),t.__H.__h=[]}catch(e){t.__H.__h=[],S.__e(e,t.__v)}}S.__b=function(t){Z=null,gt&&gt(t)},S.__r=function(t){bt&&bt(t),Tr=0;var e=(Z=t.__c).__H;e&&(e.__h.forEach(ge),e.__h.forEach(Re),e.__h=[])},S.diffed=function(t){Pt&&Pt(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(Et.push(e)!==1&&xt===S.requestAnimationFrame||((xt=S.requestAnimationFrame)||function(r){var o,n=function(){clearTimeout(i),At&&cancelAnimationFrame(o),setTimeout(r)},i=setTimeout(n,100);At&&(o=requestAnimationFrame(n))})(Ar)),Z=null},S.__c=function(t,e){e.some(function(r){try{r.__h.forEach(ge),r.__h=r.__h.filter(function(o){return!o.__||Re(o)})}catch(o){e.some(function(n){n.__h&&(n.__h=[])}),e=[],S.__e(o,r.__v)}}),St&&St(t,e)},S.unmount=function(t){Tt&&Tt(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(o){try{ge(o)}catch(n){e=n}}),e&&S.__e(e,r.__v))};var At=typeof requestAnimationFrame=="function";function ge(t){var e=Z,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),Z=e}function Re(t){var e=Z;t.__c=t.__(),Z=e}var we={isLoading:!0,t:()=>""},Er=ut(we),Ce=class extends H{state=we;pendingFetch;componentDidMount(){this.fetchLocale()}componentDidUpdate(e){let r=this.props;e.url!==r.url&&this.fetchLocale()}componentWillUnmount(){this.pendingFetch?.abort()}render(){return I(Er.Provider,{children:this.props.children,value:this.state})}async fetchLocale(){try{this.setState(we),this.pendingFetch=new AbortController;let{credentials:e,headers:r,url:o}=this.props,n=await fetch(o,{credentials:e,headers:r,method:"GET",signal:this.pendingFetch.signal});if(!n.ok)throw new Error(`unexpected HTTP response ${n.status} - ${n.statusText}`);let i=await n.json(),a=ne.fromLocale(i,this.props.formats);this.setState({isLoading:!1,t:Rr.bind(null,a)})}catch(e){this.props.onError?.(e),this.setState({isLoading:!1,t:()=>""})}finally{this.pendingFetch=void 0}}};function Rr(t,e,r){try{return typeof e=="string"?t.expand(e,r):t.expand(e.key,e.vars)}catch(o){let n;return n=M.is(o)?o.message:B.is(o)?"ParseError":"UnknownError",`⚠️ ${n}`}}function U(){this.t=[]}function z(){this.i=new Set,this.u=[]}function Rt(t){return t&&typeof t.then=="function"}function wr(t,e,r){return new Promise((o,n)=>{let{length:i}=e,a=0,d=()=>{--a==0&&o()};for(let l=0;l<i;++l){let p=e[l].call(t,r);Rt(p)&&(++a,p.then(d,n))}})}function Cr(t,e,r){return new Promise((o,n)=>{let{length:i}=e,a=0,d=()=>{if(a>=i)return void o();let l=e[a++].call(t,r);Rt(l)?l.then(d,n):d()};d()})}U.prototype.o=null,U.prototype.h=function(){return this.o||(this.o=this.t.slice()),this.o},U.prototype.l=function(t){this.t.push(t),this.o=null},U.prototype.g=function(){return this.t.length!==0&&(this.t=[],this.o=null,!0)},U.prototype.m=function(){return this.t.length},U.prototype.P=function(t){let{t:e}=this,r,o=e.length-1;for(;o>=0&&(r=e[o],r!==t&&r.p!==t);)--o;return o!==-1&&(this.t.splice(o,1),this.o=null,!0)},U.prototype.v=function(t){let e=this.t.lastIndexOf(t);e!==-1&&(this.t.splice(e,1),this.o=null)},z.prototype.o=null,z.prototype.h=function(){return this.o||(this.o=Array.from(this.i.values()).concat(this.u)),this.o},z.prototype.l=function(t){if(t.p){if(this.i.has(t.p))return;this.u.push(t)}else this.i.add(t),this.A(t);this.o=null},z.prototype.g=function(){return!!this.m()&&(this.i.clear(),this.u=[],this.o=null,!0)},z.prototype.m=function(){return this.i.size+this.u.length},z.prototype.P=function(t){return this.i.delete(t)?(this.o=null,!0):this.A(t)},z.prototype.v=function(t){let e=this.u.lastIndexOf(t);e!==-1&&(this.u.splice(e,1),this.o=null)},z.prototype.A=function(t){let e=this.u.length-1;for(;e>=0;){if(this.u[e].p===t)return this.u.splice(e,1),this.o=null,!0;--e}return!1};var kr={array:U,set:z};function K(t={}){let e=new(kr[t.backend]??U),r=t.async===!0,o=r?function(n,i){let a=i?.parallel?wr:Cr;return function(d){return a(this,n.h(),d)}}(e,t):function(n,i){return function(a){let d=n.h(),{length:l}=d;for(let p=0;p<l;++p)d[p].call(this,a)}}(e);return o.S=e,o.isAsync=r,o}function Mr(t,e){let r=!1,o=function(n){if(!r)return t.S.v(o),r=!0,e.call(this,n)};o.p=e,t.S.l(o)}function ie(t,e,r){r?.once?Mr(t,e):t.S.l(e)}var k={x:0,y:0};function se(t,e){let r=t.x-e.x,o=t.y-e.y;return Math.sqrt(r*r+o*o)}function $(t,e=0,r=1){return t<e?e:t>r?r:t}function G(t){return Math.abs(t)<Number.EPSILON}var ae=class{longPress=K();multiClick=K();press=K();acceptsNewPointers=!0;editor;longPressDelay;maxPressDistance;multiClickDelay;isPressValid=!1;longPressTimeout;multiClickCount=0;multiClickTime=0;constructor(e){this.editor=e.editor,this.longPressDelay=e.longPressDelay??800,this.maxPressDistance=e.maxPressDistance??10,this.multiClickDelay=e.multiClickDelay??400}handlePointerDown(e,r){if(r.length>1){this.cancelPress();return}switch(this.isPressValid=!0,e.type){case"mouse":this.multiClickTick(e.editor,!1);break;case"touch":case"pen":this.longPressTimeout=setTimeout(()=>this.onLongPress(e.editor),this.longPressDelay);break}}handlePointerMove(e,r){se(e.start,e)>this.maxPressDistance&&this.cancelPress()}handlePointerUp(e,r){this.isPressValid&&(this.press(e.editor),e.type==="mouse"&&this.multiClickTick(e.editor,!0)),this.cancelPress()}cancelPress(){this.longPressTimeout!==void 0&&(clearTimeout(this.longPressTimeout),this.longPressTimeout=void 0),this.isPressValid=!1}onLongPress(e){this.longPressTimeout=void 0,this.longPress(e)}multiClickTick(e,r){let o=performance.now();o-this.multiClickTime>this.multiClickDelay?this.multiClickCount=0:r&&++this.multiClickCount>=2&&this.multiClick(e),this.multiClickTime=o}};var Me=class extends ae{drag=K();drop=K();offset={...k};isDragging=!1;acceptsNewPointers=!0;edgeProximity;pushSpeedBasis;pushSpeed={...k};start={...k};animationHandle;lastTimestamp;lastPoint;constructor(e){super(e);this.edgeProximity=e.edgeProximity??64,this.pushSpeedBasis=e.pushSpeed??.5}handlePointerDown(e,r){this.acceptsNewPointers=!1,this.isDragging=!0,this.lastPoint=e,this.start=e.editor,this.offset={...k},this.startPushAnimation(e),super.handlePointerDown(e,r)}handlePointerMove(e,r){this.lastPoint=e,this.offset.x=e.editor.x-this.start.x,this.offset.y=e.editor.y-this.start.y,this.drag(this.offset),this.startPushAnimation(e),super.handlePointerMove(e,r)}handlePointerUp(e,r){this.acceptsNewPointers=!0,this.isDragging=!1,this.stopPushAnimation(),this.drop(this.offset),super.handlePointerUp(e,r)}startPushAnimation(e){this.pushSpeed.x=this.pushSpeedBasis*($(1-(e.x-this.editor.edgeTopLeft.x)/this.edgeProximity)-$(1-(this.editor.edgeBottomRight.x-e.x)/this.edgeProximity)),this.pushSpeed.y=this.pushSpeedBasis*($(1-(e.y-this.editor.edgeTopLeft.y)/this.edgeProximity)-$(1-(this.editor.edgeBottomRight.y-e.y)/this.edgeProximity)),!G(this.pushSpeed.x)||!G(this.pushSpeed.y)?this.animationHandle===void 0&&(this.lastTimestamp=void 0,this.animationHandle=requestAnimationFrame(this.onTick)):this.stopPushAnimation()}stopPushAnimation(){this.animationHandle!==void 0&&(cancelAnimationFrame(this.animationHandle),this.animationHandle=void 0)}onTick=e=>{let r=0;this.lastTimestamp!==void 0&&(r=e-this.lastTimestamp),this.editor.setOffset({x:this.pushSpeed.x*r,y:this.pushSpeed.y*r}),this.offset=this.editor.clientToEditorSpace(this.lastPoint),this.offset.x-=this.start.x,this.offset.y-=this.start.y,this.drag(this.offset),this.lastTimestamp=e,this.animationHandle=requestAnimationFrame(this.onTick)}};var Ge=class extends ae{acceptsNewPointers=!0;usePointerLock;pinchInitDistance=0;pinchInitZoom=1;didLongPress=!1;isPointerLocked=!1;constructor(e){super(e);this.usePointerLock=e.usePointerLock??!1,this.usePointerLock&&document.addEventListener("pointerlockchange",this.onPointerLockChange)}dispose(){this.usePointerLock&&document.removeEventListener("pointerlockchange",this.onPointerLockChange)}handlePointerDown(e,r){if(super.handlePointerDown(e,r),this.usePointerLock&&r.length===1&&e.type==="mouse"&&this.editor.canvas?.requestPointerLock(),r.length===2){let[o,n]=r;this.pinchInitDistance=se(o,n),this.pinchInitZoom=this.editor.zoom,this.acceptsNewPointers=!1}}handlePointerMove(e,r){if(super.handlePointerMove(e,r),!this.didLongPress)if(r.length===2){let o=r[1]===e?r[0]:r[1],n=se(e,o);this.editor.setZoom(this.pinchInitZoom*n/this.pinchInitDistance,{x:(e.x+o.x)/2,y:(e.y+o.y)/2},!1),this.editor.setOffset({x:(e.x+o.x)/2-(e.x-e.delta.x+o.x)/2,y:(e.y+o.y)/2-(e.y-e.delta.y+o.y)/2})}else this.editor.setOffset({x:e.delta.x,y:e.delta.y})}handlePointerUp(e,r){super.handlePointerUp(e,r),this.acceptsNewPointers=!0,r.length===1&&(this.didLongPress=!1),this.isPointerLocked&&document.exitPointerLock()}onLongPress(e){super.onLongPress(e),this.didLongPress=!0}onPointerLockChange=()=>{this.isPointerLocked=document.pointerLockElement===this.editor.canvas}};var wt=window.devicePixelRatio||1,De=class extends H{zoom;offset={...k};canvas=null;edgeTopLeft={...k};edgeBottomRight={...k};canvasCssClass;pointers=[];rawOffset={...k};rawZoom;gesture=null;frameHandle;observer;constructor(e,r){super(e,r);let o=Math.max((e.minZoom+e.maxZoom)/2,Number.EPSILON);this.zoom=o,this.rawZoom=o}componentDidMount(){let e={passive:!0};window.addEventListener("pointermove",this.onPointerMove,e),window.addEventListener("pointerup",this.onPointerLost,e),window.addEventListener("pointercancel",this.onPointerLost,e)}componentWillUnmount(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerLost),window.removeEventListener("pointercancel",this.onPointerLost),this.observer?.disconnect(),this.observer=void 0,this.frameHandle!==void 0&&(cancelAnimationFrame(this.frameHandle),this.frameHandle=void 0)}shouldComponentUpdate(){return!1}render(){return I("canvas",{class:this.canvasCssClass,onContextMenu:Ct,onLostPointerCapture:this.onPointerLost,onPointerDown:this.onPointerDown,onWheel:this.onWheel,ref:this.onCanvasRef})}updateView(){this.frameHandle??=requestAnimationFrame(this.onFrame)}clientToEditorSpace(e){return{x:(e.x-(this.edgeTopLeft.x+this.edgeBottomRight.x)/2-this.offset.x)/this.zoom,y:(e.y-(this.edgeTopLeft.y+this.edgeBottomRight.y)/2-this.offset.y)/this.zoom}}getVisibleRect(){return{topLeft:this.clientToEditorSpace(this.edgeTopLeft),bottomRight:this.clientToEditorSpace(this.edgeBottomRight)}}setOffset(e,r=!0){this.rawOffset.x=(r?this.rawOffset.x:0)+e.x,this.rawOffset.y=(r?this.rawOffset.y:0)+e.y;let o=this.getOffsetAdjustment(this.rawOffset);(!G(o.x-this.offset.x)||!G(o.y-this.offset.y))&&(this.offset.x=o.x,this.offset.y=o.y,this.updateView())}setZoom(e,r,o=!0){this.rawZoom=$((o?this.rawZoom:0)+e,Math.max(this.props.minZoom,Number.EPSILON),this.props.maxZoom);let n=this.getZoomAdjustment(this.rawZoom),i=this.zoom-n;if(G(i))return;let a=this.clientToEditorSpace(r);this.setOffset({x:i*a.x,y:i*a.y}),this.zoom=n,this.updateView()}getOffsetAdjustment(e){return e}getZoomAdjustment(e){return e}getWheelDeltaAdjustment(e){return 1}updateLayout(e=this.canvas.getBoundingClientRect()){this.edgeTopLeft.y=e.top,this.edgeTopLeft.x=e.left,this.edgeBottomRight.y=e.bottom,this.edgeBottomRight.x=e.right}onPointerDown=e=>{let r=this.clientToEditorSpace(e);if(this.gesture===null&&(this.updateLayout(),this.gesture=this.hitTest(r,e)),this.gesture?.acceptsNewPointers===!0){let o={id:e.pointerId,type:e.pointerType,delta:{...k},editor:r,start:{x:e.x,y:e.y},x:e.x,y:e.y};this.pointers.push(o),this.gesture.handlePointerDown(o,this.pointers)}};onPointerMove=e=>{let r=this.pointers.find(({id:o})=>e.pointerId===o);!r||(r.delta.x=e.movementX/wt,r.delta.y=e.movementY/wt,G(r.x-e.x)&&G(r.y-e.y)?(r.sumMovement??={...k},r.sumMovement.x+=r.delta.x,r.sumMovement.y+=r.delta.y,r.x=r.start.x+r.sumMovement.x,r.y=r.start.y+r.sumMovement.y):(r.x=e.x,r.y=e.y),r.editor=this.clientToEditorSpace(r),this.gesture.handlePointerMove(r,this.pointers))};onPointerLost=e=>{let r=this.pointers.findIndex(({id:n})=>e.pointerId===n);if(r===-1)return;let o=this.pointers[r];this.gesture.handlePointerUp(o,this.pointers),this.pointers.splice(r,1),this.pointers.length===0&&(this.gesture=null)};onWheel=e=>{Ct(e);let r=-this.getWheelDeltaAdjustment(e);e.ctrlKey?(r/=(this.edgeBottomRight.y-this.edgeTopLeft.y)/3,this.setZoom(e.deltaY*r,e)):this.setOffset({x:(e.shiftKey?e.deltaY:e.deltaX)*r,y:(e.shiftKey?e.deltaX:e.deltaY)*r})};onCanvasRef=e=>{let r=this.canvas;r&&this.observer.unobserve(r),e&&(this.canvasAcquired(e),this.observer??=new ResizeObserver(this.onResizeObserved),this.observer.observe(e,{box:"content-box"})),this.canvas=e};onResizeObserved=e=>{let r=e[0].contentRect;this.updateLayout(r),this.canvasResized(r.width,r.height),this.updateView()};onFrame=()=>{this.frameHandle=this.canvasRender()?requestAnimationFrame(this.onFrame):void 0}};function Ct(t){t.preventDefault(),t.stopImmediatePropagation()}function kt(t,e){let{length:r}=t;return r>1&&Le(t,e,0,r-1),t}function Dr(t,e,r,o){let n=t[r+o>>>1],i;for(;r<=o;){for(;e(t[r],n)<0;)++r;for(;e(t[o],n)>0;)--o;r<=o&&(i=t[r],t[r++]=t[o],t[o--]=i)}return r}function Le(t,e,r,o){let n=Dr(t,e,r,o);r<n-1&&Le(t,e,r,n-1),o>n&&Le(t,e,n,o)}var Be=[1,0,0,-1,-1,0,0,1],j=[0,0,0,0,0,0];function Mt(t,e,r,o,n){if(n.x===0&&n.y===0){for(let d=0;d<e.length;++d){let l=e[d];t.endMoveNode(l,l.x+n.x,l.y+n.y),o.add(l.id,n.frac)}return}kt(e,Lr);let i=0,a=0;for(let d=0;d<e.length;++d){let l=e[d];i+=l.x,a+=l.y}i/=e.length,a/=e.length;for(let d=0;d<e.length;++d){let l=e[d],p=Be;if(!G(l.x-i)||!G(l.y-a)){let b=Math.sign(l.x-i),v=0;b===0&&(v=Math.sign(l.y-a))===0&&(b=Be[0],v=Be[1]),j[0]=b,j[1]=v,j[2]=-v,j[3]=b,j[4]=v,j[5]=-b,p=j}let c=Gt(t,l.x+n.x,l.y+n.y,p,r);if(c)for(let b,v=0;v<c.length;++v)b=c[v],t.beginMoveNode(b.node),t.endMoveNode(b.node,b.dx,b.dy,!0),o.add(b.node.id,{x:-b.dx,y:-b.dy});t.endMoveNode(l,l.x+n.x,l.y+n.y),o.add(l.id,n.frac)}}function Lr(t,e){return e.y-t.y}function Gt(t,e,r,o,n,i=[]){let a=t.getNodeAt(e,r);if(!a)return[];if(n.has(a.id)||i.includes(a.id))return null;let d=i.concat(a.id),l=null,p=0,c,b;do{let v=o[p++],f=o[p++],x=Gt(t,e+v,r+f,o,n,d);x&&(!l||x.length<l.length)&&(l=x,c=v,b=f)}while(p<o.length);return l&&l.unshift({node:a,dx:c,dy:b}),l}function X(t){return[(t>>16&255)/255,(t>>8&255)/255,(t&255)/255]}function ee(t,e){let r=t.createProgram();for(let o of e.shaders){let n=Br(t,o);t.attachShader(r,n)}if(t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error(`Error linking program:
`+t.getProgramInfoLog(r));return{ref:r,attributes:Dt(e.attributes,o=>t.getAttribLocation(r,o)),uniforms:Dt(e.uniforms,o=>t.getUniformLocation(r,o))}}function Br(t,e){let r=t.createShader(e.type);if(t.shaderSource(r,e.source),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){let o={[t.VERTEX_SHADER]:"vertex",[t.FRAGMENT_SHADER]:"fragment"}[e.type]||"a";throw new Error(`Error compiling ${o} shader:
${t.getShaderInfoLog(r)}`)}return r}function Dt(t,e){let r={};for(let o of t)r[o]=e(o);return r}var Lt=`#version 300 es
precision mediump float;

in vec2 vGridPosition;

layout(location = 0) out vec4 fragColor;

uniform float uGridSize;
uniform vec3 uBackgroundColor;
uniform vec3 uGridlineColor;

void main() {
	// Flooring to strictly align to one side, avoiding double-width or disjoint gridlines.
	float halfSize = floor(uGridSize / 2.0);
	float gridlineDist = min(
		abs(floor(mod(vGridPosition[0], uGridSize) - halfSize)),
		abs(floor(mod(vGridPosition[1], uGridSize) - halfSize))
	);

	fragColor = vec4(mix(uBackgroundColor, uGridlineColor, float(gridlineDist == 0.0)), 1.0);
}
`;var Bt=`#version 300 es

in vec2 aClipPosition;

out vec2 vGridPosition;

uniform vec2 uScreenSize;
uniform vec2 uGridOffset;

void main() {
	gl_Position = vec4(aClipPosition, 0.0, 1.0);

	// Assuming that aClipPosition is +1 xor -1 and uGridOffset is an integer,
	// the final vGridPosition vector will have integer coordinates.
	vec2 mapping = vec2(
		(aClipPosition[0] * -0.5) + 0.5,
		(aClipPosition[1] *  0.5) + 0.5
	);

	vec2 offset = vec2(
		floor(uScreenSize[0] * 0.5),
		floor(uScreenSize[1] * 0.5)
	);

	vGridPosition = uScreenSize * mapping - offset + uGridOffset;
}
`;function It(t,e){let r=ee(t,{shaders:[{source:Bt,type:t.VERTEX_SHADER},{source:Lt,type:t.FRAGMENT_SHADER}],attributes:["aClipPosition"],uniforms:["uScreenSize","uGridOffset","uGridSize","uBackgroundColor","uGridlineColor"]}),o=t.createVertexArray();t.bindVertexArray(o);let n=t.createBuffer(),i=new Int8Array([-1,-1,1,-1,-1,1,1,1]);t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_READ),t.enableVertexAttribArray(r.attributes.aClipPosition),t.vertexAttribPointer(r.attributes.aClipPosition,2,t.BYTE,!1,0,0);let a=X(e.backgroundColor),d=X(e.gridlineColor);return{render(l){t.useProgram(r.ref),t.bindVertexArray(o),t.uniform2fv(r.uniforms.uScreenSize,[t.drawingBufferWidth,t.drawingBufferHeight]),t.uniform2fv(r.uniforms.uGridOffset,[l.gridOffset.x,l.gridOffset.y]),t.uniform1f(r.uniforms.uGridSize,l.gridSize),t.uniform3fv(r.uniforms.uBackgroundColor,a),t.uniform3fv(r.uniforms.uGridlineColor,d),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}}var W=class{duration;easing;keys;map=new Map;zeroState;transitionCount=0;constructor(e){let r={};for(let o=0;o<e.keys.length;++o)r[e.keys[o]]=0;Object.assign(this,e),this.zeroState=r}get hasTransitions(){return this.transitionCount>0}add(e,r,o=W.now()){let n=this.map.get(e),i=n?.find(d=>G(d.$startTime-o));if(i){for(let d,l=0;l<this.keys.length;++l)d=this.keys[l],i[d]+=r[d]??0;return}i={$startTime:o};let a=!0;for(let d,l,p=0;p<this.keys.length;++p)d=this.keys[p],l=r[d]??0,i[d]=l,a&&=G(l);a||(n||this.map.set(e,n=[]),++this.transitionCount,n.push(i))}getFrame(e,r=W.now()){let o=this.map.get(e);if(!o)return this.zeroState;let{keys:n}=this,i={};for(let d=0;d<n.length;++d)i[n[d]]=0;let a=0;for(;a<o.length;){let d=o[a],l=1-(r-d.$startTime)/this.duration;if(l<=0){o.splice(a,1),--this.transitionCount;continue}l=this.easing(l);for(let p=0;p<n.length;++p){let c=n[p];i[c]+=d[c]*l}++a}return o.length===0&&this.map.delete(e),i}static now(){return performance.now()}};function Nt(t){return{ref:t.createBuffer(),size:0}}var ue=class{constructor(e,r){this.alloc=e;this.growthFactor=r?.growthFactor??1.618034,this.data=e(r?.initialCapacity??0)}data;growthFactor;usedCapacity=0;resize(e,r=!0){this.usedCapacity=e;let o=Math.max(this.data.length,1);if(e<o)return!1;let n=Math.ceil(Math.log(e/o)/Math.log(this.growthFactor)),i=Math.trunc(o*this.growthFactor**n),a=this.data;return this.data=this.alloc(i),r&&this.data.set(a),!0}commit(e,r){let o=r;o?.ref||(o={ref:r,size:e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE)}),e.bindBuffer(e.ARRAY_BUFFER,o.ref);let n=this.usedCapacity*this.data.BYTES_PER_ELEMENT;o.size<n?(e.bufferData(e.ARRAY_BUFFER,this.data,e.DYNAMIC_READ),o.size=this.data.byteLength):e.bufferSubData(e.ARRAY_BUFFER,0,this.data,0,this.usedCapacity)}static createFloat32(e){return new ue(r=>new Float32Array(r),e)}};var Ot=`#version 300 es
precision mediump float;

in vec2 vTexPos;
in vec4 vColor;

layout(location = 0) out vec4 fragColor;

uniform sampler2D uShapes;
uniform vec3 uDefaultStrokeColor;
uniform vec3 uSelectedStrokeColor;

void main() {
	vec4 shape = texture(uShapes, vTexPos);
	vec3 stroke = mix(uDefaultStrokeColor, uSelectedStrokeColor, vColor.w);

	fragColor = vec4(
		mix(stroke, vColor.xyz, shape.y),
		shape.x
	);
}
`;var Ft=`#version 300 es

// shared:
in vec2 aCellPos;

// per-instance:
in vec2 aGridPos;
in float aColor;
in float aTexIndex;

out vec2 vTexPos;
out vec4 vColor;

uniform mat3x2 uViewMatrix;
uniform float uTexDiv;

void main() {
	gl_Position = vec4(
		uViewMatrix * vec3(
			aCellPos[0] + aGridPos[0],
			aCellPos[1] - aGridPos[1],
			1.0
		),
		0.0,
		1.0
	);

	float size = 1.0 / uTexDiv;
	float halfSize = size * 0.5;
	vTexPos = vec2(
		  mod(aTexIndex,  uTexDiv) / uTexDiv + aCellPos[0] * size + halfSize,
		floor(aTexIndex / uTexDiv) / uTexDiv - aCellPos[1] * size + halfSize
	);

	highp uint rgb = uint(aColor);
	vColor = vec4(
		float((rgb >> 16u) & 255u) / 255.0,
		float((rgb >>  8u) & 255u) / 255.0,
		float( rgb         & 255u) / 255.0,

		// w is used to swap between stroke colors
		float((rgb >> 24u) & 255u)
	);
}
`;function zr(t,e){let r=Math.ceil(Math.sqrt(t.length)),o=r*e,n=new OffscreenCanvas(o,o),i=n.getContext("2d",{alpha:!1,desynchronized:!0,willReadFrequently:!1});if(!i)throw new Error("Could not obtain offscreen 2D rendering context.");i.clearRect(0,0,o,o);let a=e/2;for(let d=0;d<t.length;++d)t[d](i,a+d%r*e,a+Math.trunc(d/r)*e,a);return{source:n,divisions:r}}function Ur(t,e,r,o,n){e.fillStyle="#ffff00",e.strokeStyle="#ff0000",e.lineWidth=Math.max(1,n/12),e.beginPath(),e.moveTo(Math.round(r+t[0]*n),Math.round(o+t[1]*n));let i=2;for(;i<t.length;)e.lineTo(Math.round(r+t[i++]*n),Math.round(o+t[i++]*n));e.closePath(),e.fill(),e.stroke()}function zt(t,e){let r=[];for(let o=0;o<t.length;++o)r.push(Ur.bind(null,t[o]));return zr(r,e)}function Vt(t,e){let r=ee(t,{shaders:[{source:Ft,type:t.VERTEX_SHADER},{source:Ot,type:t.FRAGMENT_SHADER}],attributes:["aCellPos","aGridPos","aColor","aTexIndex"],uniforms:["uViewMatrix","uTexDiv","uShapes","uDefaultStrokeColor","uSelectedStrokeColor"]}),o=t.createVertexArray();t.bindVertexArray(o);let n=t.createBuffer(),i=new Float32Array([-.5,-.5,.5,-.5,-.5,.5,.5,.5]);t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_READ),t.enableVertexAttribArray(r.attributes.aCellPos),t.vertexAttribPointer(r.attributes.aCellPos,2,t.FLOAT,!1,0,0),t.vertexAttribDivisor(r.attributes.aCellPos,0);let a=Nt(t),d=ue.createFloat32();t.bindBuffer(t.ARRAY_BUFFER,a.ref),t.enableVertexAttribArray(r.attributes.aGridPos),t.vertexAttribPointer(r.attributes.aGridPos,2,t.FLOAT,!1,16,0),t.vertexAttribDivisor(r.attributes.aGridPos,1),t.enableVertexAttribArray(r.attributes.aColor),t.vertexAttribPointer(r.attributes.aColor,1,t.FLOAT,!1,16,8),t.vertexAttribDivisor(r.attributes.aColor,1),t.enableVertexAttribArray(r.attributes.aTexIndex),t.vertexAttribPointer(r.attributes.aTexIndex,1,t.FLOAT,!1,16,12),t.vertexAttribDivisor(r.attributes.aTexIndex,1);let l=zt(e.shapes,e.shapeResolution),p=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,p),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE,l.source);let c=X(e.defaultStrokeColor),b=X(e.selectedStrokeColor);return{render(v){let{dragging:f,nodes:x,selectedIds:D,transitions:s}=v,u=f?.mode===1,h=x.length+(u?f.nodes.length:0);if(h===0)return;t.useProgram(r.ref),t.bindVertexArray(o),d.resize(h*4,!1);let{data:y}=d,m=W.now(),_=0,g=(C,N,O=k)=>{let F=s.getFrame(C.id,m);y[_++]=C.x+O.x+F.x,y[_++]=C.y+O.y+F.y,y[_++]=(C.color??16777215)|(N?16777216:0),y[_++]=C.shapeIndex??0};for(let C=0;C<x.length;++C)g(x[C],!u&&D.has(x[C].id));u&&f.nodes.forEach(C=>g(C,!0,f.offset)),d.commit(t,a);let P=t.drawingBufferWidth/2,T=t.drawingBufferHeight/2,A=v.gridSize/P,R=v.gridSize/T,E=v.gridOffset.x/P,w=-v.gridOffset.y/T;t.uniform1i(r.uniforms.uShapes,0),t.uniform1f(r.uniforms.uTexDiv,l.divisions),t.uniform3fv(r.uniforms.uDefaultStrokeColor,c),t.uniform3fv(r.uniforms.uSelectedStrokeColor,b),t.uniformMatrix3x2fv(r.uniforms.uViewMatrix,!1,[A,0,0,R,E,w]),t.drawArraysInstanced(t.TRIANGLE_STRIP,0,4,h)}}}var Ht=`#version 300 es
precision mediump float;

layout(location = 0) out vec4 fragColor;

uniform vec3 uSelectedStrokeColor;
uniform float uDashSize;

void main() {
	float xMod = mod(gl_FragCoord[0], 2.0 * uDashSize);
	float yMod = mod(gl_FragCoord[1], 2.0 * uDashSize);
	float alpha = float(
		(xMod < uDashSize && yMod < uDashSize) ||
		(xMod > uDashSize && yMod > uDashSize)
	);

	fragColor = vec4(uSelectedStrokeColor, alpha);
}
`;var Yt=`#version 300 es

in vec2 aClipPos;

void main() {
	gl_Position = vec4(aClipPos, 0.0, 1.0);
}
`;function Xt(t,e){let r=ee(t,{shaders:[{source:Yt,type:t.VERTEX_SHADER},{source:Ht,type:t.FRAGMENT_SHADER}],attributes:["aClipPos"],uniforms:["uSelectedStrokeColor","uDashSize"]}),o=t.createVertexArray();t.bindVertexArray(o);let n=t.createBuffer(),i=new Float32Array(8);t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_READ),t.enableVertexAttribArray(r.attributes.aClipPos),t.vertexAttribPointer(r.attributes.aClipPos,2,t.FLOAT,!1,0,0);let a=X(e.selectedStrokeColor);return{render({gridOffset:d,gridSize:l,dragging:p}){if(p?.mode!==0)return;t.useProgram(r.ref),t.bindVertexArray(o);let c=t.drawingBufferWidth/2,b=t.drawingBufferHeight/2,v=(D,s,u)=>{i[u]=(D*l+d.x)/c,i[u+1]=-(s*l+d.y)/b},f=p.start,x=p.offset;v(f.x,f.y,0),v(f.x+x.x,f.y,2),v(f.x+x.x,f.y+x.y,4),v(f.x,f.y+x.y,6),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferSubData(t.ARRAY_BUFFER,0,i),t.uniform1f(r.uniforms.uDashSize,l/4),t.uniform3fv(r.uniforms.uSelectedStrokeColor,a),t.drawArrays(t.LINE_LOOP,0,4)}}}function Wt(t,e){let r=t.getContext("webgl2",{alpha:!1,antialias:!1,depth:!1,desynchronized:!0,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance",premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1});if(!r)throw new Error("Could not obtain WebGL rendering context.");r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA);let o=It(r,e),n=Vt(r,e),i=Xt(r,e);return{render(a){o.render(a),n.render(a),i.render(a)},resize(a,d){t.width===a&&t.height===d||(t.width=a,t.height=d,r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight))}}}var q=window.devicePixelRatio||1,Ie=class extends De{canvasCssClass="graph-editor";dragGesture;panAndZoomGesture;selectedIds=new Set;transitions=new W({duration:300,easing:e=>e**5,keys:["x","y"]});dragging;renderer;constructor(e){super(e);this.dragGesture=new Me({editor:this}),this.panAndZoomGesture=new Ge({editor:this,usePointerLock:!0}),ie(this.dragGesture.drag,this.onDragMove),ie(this.dragGesture.drop,this.onDragDrop),ie(this.dragGesture.press,this.onNodePress),ie(this.panAndZoomGesture.press,this.onVoidPress)}componentWillUnmount(){super.componentWillUnmount(),this.renderer=void 0}canvasAcquired(e){this.renderer=Wt(e,{backgroundColor:this.props.backgroundColor,gridlineColor:this.props.gridlineColor,defaultStrokeColor:this.props.defaultStrokeColor,selectedStrokeColor:this.props.selectedStrokeColor,shapes:this.props.shapes,shapeResolution:Math.round(this.props.maxZoom*this.props.gridSize*q)})}canvasResized(e,r){this.renderer.resize(Math.round(e*q),Math.round(r*q))}canvasRender(){let e=this.getVisibleRect(),r=this.editorToGridSpace(e.topLeft),o=this.editorToGridSpace(e.bottomRight);return this.renderer.render({gridSize:Math.round(this.zoom*this.props.gridSize*q),gridOffset:{x:Math.round(this.offset.x*q),y:Math.round(this.offset.y*q)},nodes:this.props.graph.getNodesWithin(r.x,r.y,o.x,o.y),selectedIds:this.selectedIds,transitions:this.transitions,dragging:this.dragging}),this.transitions.hasTransitions}hitTest(e,r){let o=this.editorToGridSpace(e),{graph:n}=this.props;if(r.ctrlKey)return this.dragging={mode:0,start:o.raw,offset:{...k}},this.updateView(),this.dragGesture;let i=n.getNodeAt(o.x,o.y);if(i){let a;return this.selectedIds.has(i.id)?a=Array.from(this.selectedIds).map(d=>n.getNodeById(d)):(a=[i],this.selectedIds.clear(),this.selectedIds.add(i.id)),this.dragging={mode:1,offset:{...k},nodes:a},a.forEach(d=>n.beginMoveNode(d)),this.dragGesture}return this.panAndZoomGesture}getZoomAdjustment(e){let r=this.props.gridSize*q/2;return Math.round(e*r)/r}getWheelDeltaAdjustment(e){switch(e.deltaMode){case WheelEvent.DOM_DELTA_PAGE:return this.edgeBottomRight.y-this.edgeTopLeft.y;case WheelEvent.DOM_DELTA_LINE:return this.props.gridSize;default:return 1}}editorToGridSpace(e){let r={x:e.x/this.props.gridSize,y:e.y/this.props.gridSize},o=Math.round(r.x),n=Math.round(r.y);return{x:o,y:n,raw:r,frac:{x:r.x-o,y:r.y-n}}}onVoidPress=()=>{this.selectedIds.size>0&&(this.selectedIds.clear(),this.updateView())};onNodePress=e=>{let r=this.editorToGridSpace(e),o=this.props.graph.getNodeAt(r.x,r.y);o&&(this.selectedIds.clear(),this.selectedIds.add(o.id),this.updateView())};onDragMove=e=>{this.dragging.offset=this.editorToGridSpace(e).raw,this.updateView()};onDragDrop=e=>{let r=this.editorToGridSpace(e),o=this.dragging;switch(o.mode){case 1:Mt(this.props.graph,o.nodes,this.selectedIds,this.transitions,r);break;case 0:{let{start:n}=o,i=this.props.graph.getNodesWithin(Math.round(Math.min(n.x,n.x+r.x)),Math.round(Math.min(n.y,n.y+r.y)),Math.round(Math.max(n.x,n.x+r.x)),Math.round(Math.max(n.y,n.y+r.y)));this.selectedIds.clear(),i.forEach(a=>this.selectedIds.add(a.id));break}}this.dragging=void 0,this.updateView()}};var Yr=[.68,0,.657,-.176,.589,-.34,.481,-.481,.34,-.589,.176,-.657,0,-.68,-.176,-.657,-.34,-.589,-.481,-.481,-.589,-.34,-.657,-.176,-.68,-0,-.657,.176,-.589,.34,-.481,.481,-.34,.589,-.176,.657,-0,.68,.176,.657,.34,.589,.481,.481,.589,.34,.657,.176],Xr=[.68,-.68,-.68,-.68,-.68,.68,.68,.68],Wr=[.8,0,0,-.8,-.8,-0,-0,.8],Zr=[.8,-.68,-.8,-.68,-0,.68],Kr=[.462,0,.693,-.4,.231,-.4,0,-.8,-.231,-.4,-.693,-.4,-.462,-0,-.693,.4,-.231,.4,-0,.8,.231,.4,.693,.4],Ne=[Yr,Xr,Wr,Zr,Kr];var ce=class{constructor(e){this.alphabet=e;let r=e.length;if(r===0)throw new Error("Alphabet cannot be empty.");if((r&r-1)!==0)throw new Error("Alphabet length must be a power of two.");this.shift=Math.trunc(Math.log(r)/Math.LN2),this.mask=Math.trunc(r-1)}shift;mask;index=0;next(){let e="",r=this.index++;do e=this.alphabet[r&this.mask]+e,r>>=this.shift;while(r>0);return e}static createBase32(){return new ce("0123456789abcdefghijklmnopqrstuv")}};var ze=ar(Zt());var Ue=class extends ze.default{toBBox({x:e,y:r}){return{minX:e,minY:r,maxX:e,maxY:r}}compareMinX(e,r){return e.x-r.x}compareMinY(e,r){return e.y-r.y}};function de(t,e){if(!t)return!1;let r=t.indexOf(e);return r===-1?!1:(t.splice(r,1),!0)}function Ve(t,e,r,o){return{maxX:r+Number.EPSILON,minX:t-Number.EPSILON,maxY:o+Number.EPSILON,minY:e-Number.EPSILON}}var He=class{identity;edges=new Set;nodes=new Map;space=new Ue;constructor(e){this.identity=e.identity}createNode(e,r){let o={id:this.identity.next(),x:e,y:r};return this.nodes.set(o.id,o),this.space.insert(o),o}removeNode(e){if(!this.nodes.delete(e.id))return!1;if(e.incoming)for(let r of e.incoming)this.edges.delete(r),de(r.source.outgoing,r);if(e.outgoing)for(let r of e.outgoing)this.edges.delete(r),de(r.destination.incoming,r);return this.space.remove(e),!0}createEdge(e,r){let o=e.outgoing,n=r.incoming,i=o&&n&&(o.length<n.length?o.find(a=>a.destination===r):n.find(a=>a.source===e));return i||(i={source:e,destination:r},(e.outgoing??=[]).push(i),(r.incoming??=[]).push(i),this.edges.add(i)),i}removeEdge(e){return this.edges.delete(e)?(de(e.source.outgoing,e),de(e.destination.incoming,e),!0):!1}beginMoveNode(e){this.space.remove(e)}endMoveNode(e,r,o,n=!1){e.x=(n?e.x:0)+r,e.y=(n?e.y:0)+o,this.space.insert(e)}getNodeById(e){return this.nodes.get(e)??null}getNodeAt(e,r){let o=this.space.search(Ve(e,r,e,r));return o.length>0?o[0]:null}getNodesWithin(e,r,o,n){return this.space.search(Ve(e,r,o,n))}};var Ye=new He({identity:ce.createBase32()});function be(t,e){return Math.round(t+Math.random()*(e-t))}var $t=1e5,Pe=Math.sqrt($t)*2,Kt=0;for(;Kt<$t;){let t=be(-Pe,Pe),e=be(-Pe,Pe);if(Ye.getNodeAt(t,e))continue;let r=Ye.createNode(t,e);r.color=be(0,16777215),r.shapeIndex=be(0,Ne.length-1),++Kt}var jt=()=>I(Ce,{url:"./locale/en.json"},I(Ie,{graph:Ye,gridSize:32,backgroundColor:2763306,gridlineColor:3815994,defaultStrokeColor:0,selectedStrokeColor:16777215,shapes:Ne,minZoom:.5,maxZoom:2}));at(I(jt,null),document.getElementById("root"));})();
//# sourceMappingURL=index.js.map
